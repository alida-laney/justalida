---
layout: default
---

{%- assign is_poem = false -%}
{%- assign is_story = false -%}
{%- assign is_visual = false -%}
{%- if page.type contains 'poem' -%}
  {%- assign is_poem = true -%}
{%- endif -%}
{%- if page.type contains 'story' -%}
  {%- assign is_story = true -%}
{%- endif -%}
{%- if page.type contains 'visual-art' -%}
  {%- assign is_visual = true -%}
{%- endif -%}
{%- assign is_mixed = false -%}
{%- if page.type.size > 1 -%}
  {%- assign is_mixed = true -%}
{%- endif -%}

<article class="content {% for type in page.type %}content-{{ type | slugify }} {% endfor %}h-entry" itemscope itemtype="http://schema.org/CreativeWork">

  <header class="content-header {% if is_poem %}poem-header{% elsif is_story %}story-header{% else %}default-header{% endif %}">
    <h1 class="content-title {% if is_poem %}poem-title{% elsif is_story %}story-title{% else %}default-title{% endif %}">{{ page.title | escape }}</h1>
    
    <div class="content-meta">
      <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {%- assign date_format = site.minima.date_format | default: "%B %Y" -%}
        {{ page.date | date: date_format }}
      </time>
      
      {% if is_mixed %}
        <span class="content-types">
          {% for type in page.type %}
            <span class="type-badge">{{ type | capitalize }}</span>
          {% endfor %}
        </span>
      {% endif %}
    </div>
  </header>

  <div class="content-body {% if is_poem %}poem-content{% elsif is_story %}story-content{% else %}default-content{% endif %}" itemprop="text">
    {{ content }}
  </div>

  {% if page.companions.size > 0 %}
  <section class="companions">
    <h3>Companion Pieces</h3>
    <div class="companion-links">
      {% for companion_id in page.companions %}
        {% assign companion = site.content | where: "content_id", companion_id | first %}
        {% if companion %}
          <a href="{{ companion.url | relative_url }}" class="companion-link">
            <span class="companion-title">{{ companion.title }}</span>
            <span class="companion-type">{{ companion.type | join: ", " | capitalize }}</span>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {%- if page.tags.size > 0 -%}
  <div class="content-tags">
    <p><strong>Themes:</strong>
    {%- for tag in page.tags -%}
      <a href="{{ '/themes/' | append: tag | slugify | append: '/' | relative_url }}" class="tag-link">#{{ tag }}</a>
      {%- unless forloop.last -%}, {%- endunless -%}
    {%- endfor -%}
    </p>
  </div>
  {%- endif -%}

  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
</article>

<style>
/* Poem-specific styling */
.poem-title {
  font-size: 2.5em;
  font-weight: bold;
  color: #333;
  margin-bottom: 0.5em;
  text-align: center;
}

.poem-header .content-meta {
  text-align: center;
  color: #666;
  font-style: italic;
  margin-bottom: 2em;
}

.poem-content {
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.6;
  font-size: 1.1em;
}

/* Story-specific styling */
.story-title {
  font-size: 2em;
  font-weight: bold;
  color: #333;
  margin-bottom: 0.5em;
}

.story-content {
  max-width: 700px;
  margin: 0 auto;
  line-height: 1.7;
  font-size: 1.05em;
}

/* Mixed media styling */
.content-types {
  margin-left: 1em;
}

.type-badge {
  display: inline-block;
  background: #f0f0f0;
  color: #666;
  padding: 0.2em 0.5em;
  border-radius: 3px;
  font-size: 0.8em;
  margin-right: 0.3em;
}

/* Companions section */
.companions {
  margin-top: 3em;
  padding-top: 2em;
  border-top: 1px solid #e8e8e8;
}

.companion-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1em;
  margin-top: 1em;
}

.companion-link {
  display: block;
  padding: 1em;
  background: #f8f8f8;
  border-radius: 5px;
  text-decoration: none;
  color: #333;
  transition: background 0.3s ease;
}

.companion-link:hover {
  background: #e8e8e8;
  text-decoration: none;
}

.companion-title {
  display: block;
  font-weight: bold;
  margin-bottom: 0.3em;
}

.companion-type {
  display: block;
  font-size: 0.9em;
  color: #666;
}

/* Tags styling */
.content-tags {
  margin-top: 3em;
  padding-top: 2em;
  border-top: 1px solid #e8e8e8;
  text-align: center;
}

.tag-link {
  color: #828282;
  text-decoration: none;
  margin-right: 0.5em;
}

.tag-link:hover {
  color: #2a7ae4;
  text-decoration: underline;
}
</style>