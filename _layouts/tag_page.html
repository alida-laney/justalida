---
layout: default
---

<div class="home">
  <h1 class="page-heading">Theme: {{ page.tag }}</h1>

  <p class="tag-description">{{ page.description | default: "All content tagged with this theme." }}</p>

  {%- assign tagged_posts = site.posts | where: "tags", page.tag -%}
  {%- assign tagged_content = site.content | where: "tags", page.tag -%}

  {%- assign all_tagged = tagged_posts | concat: tagged_content | sort: 'date' | reverse -%}

  {%- if all_tagged.size > 0 -%}
    <ul class="post-list">
      {%- for item in all_tagged -%}
      <li>
        <span class="post-meta">
          {{ item.date | date: site.minima.date_format }}
          {%- if item.collection == 'content' and item.type.size > 0 -%}
            • <em>{{ item.type | join: ", " | capitalize }}</em>
          {%- elsif item.collection -%}
            • <em>{{ item.collection | capitalize }}</em>
          {%- endif -%}
        </span>
        <h3>
          <a class="post-link" href="{{ item.url | relative_url }}">
            {{ item.title | escape }}
          </a>
        </h3>
        {%- if item.excerpt -%}
          <p class="post-excerpt">{{ item.excerpt | strip_html | truncatewords: 25 }}</p>
        {%- endif -%}
        
        {%- if item.tags.size > 1 -%}
        <div class="post-tags-preview">
          {%- for tag in item.tags -%}
            {%- unless tag == page.tag -%}
              <a href="{{ '/themes/' | append: tag | slugify | append: '/' | relative_url }}" class="tag-link-small">#{{ tag }}</a>
            {%- endunless -%}
          {%- endfor -%}
        </div>
        {%- endif -%}
      </li>
      {%- endfor -%}
    </ul>
  {%- else -%}
    <p>No content found with this theme yet.</p>
  {%- endif -%}

  <div class="tag-navigation">
    <p><a href="{{ '/creations/' | relative_url }}">← Browse all creations</a></p>
  </div>
</div>

<style>
.tag-description {
  font-style: italic;
  margin-bottom: 2em;
  color: #666;
}

.post-excerpt {
  color: #666;
  margin: 0.5em 0;
}

.post-tags-preview {
  margin-top: 0.5em;
}

.tag-link-small {
  color: #999;
  text-decoration: none;
  margin-right: 0.5em;
  font-size: 0.9em;
}

.tag-link-small:hover {
  color: #2a7ae4;
  text-decoration: underline;
}

.tag-navigation {
  margin-top: 3em;
  padding-top: 2em;
  border-top: 1px solid #e8e8e8;
}
</style>